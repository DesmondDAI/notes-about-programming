学习资料基于 --> [鸟哥的linux私房菜 - bash](http://linux.vbird.org/linux_basic/0320bash.php#bash)

## shell命令格式
```
$ command  [-options]  parameter1  parameter2 ...
```
  - 命令最开始位置肯定是`command`或可执行档案（如批次脚本，shell script）
  - `command`为指令名称，如`cd`
  - 中括号[]为可选。加入选项设定时，通常`-`号加选项缩写，如`-h`；也可以`--`号加选项全称，如`--help`
  - `parameter1`和`parameter2`是依附在选项后的参数，或是`command`的参数
  - 指令太长时可以用反斜杠`\`号直接跟回车来跳到下一行继续输入，其实就是转义符，把回车`Enter`转义
  - 区分大小写

- **`man`的一些memo:**
  - Mac的**zsh**的上下跳跃（不算翻页，但比`Up/Down`跳跃范围更大）：`D`下跳，`U`上跳
  - 翻页：`空格`键；`Page Up`/`Page Down`翻页
  - 退出：`Q`键
  - **搜索功能：**按下`/`键（向下搜索）或`?`键（向上搜索），然后输入需要搜索的文字。如：`/open`是搜索"open"。`n`键是跳到下一个match，`N`键则是跳到上一个

## shell环境设定文档

- **bash**在开启时需要加载环境设定文档（如：PATH），并且文档分为：**系统全局设定** 和 **用户个人设定**
- **login shell** 与 **non-login shell**，所读取的设定文档是不一样的：
  - **login shell:** 取得**bash**时需要完整login过程，如登入时需要用户的帐号和密码，例如远程SSH进入系统时应该就是通过**login shell**的方式。读取的文档有：
    - **/etc/profile:** 系统整体的设定，建议不修改
    - **~/.bash_profile** 或 **~/.bash_login** 或 **~/.profile:** 用户个人设定，建议在此修改
  - **non-login shell:** 取得**bash**时不需要重复登入的操作，如进入系统后再开启**bash**，这时不需要输入用户帐号和密码。读取的文档有：
  - **/etc/profile**
  - **~/.bashrc**
- 合法shell写在`/etc/shells`中


## 信息流重导向

- **输出：**信息流输出分为**standard output标准输出** 和 **standard error output标准错误输出**。 **bash**默认在两者都输出到终端上。通过重导向可以把信息流导入到指定文档或设备中。分别传送的特殊字符如下：
  - **标准输入(stdin):** 代码为0，使用`<`或`<<`
  - **标准输出(stdout):** 代码为1，使用`>`*(如文件已存在即清空再输出)*或`>>`*(如文件已存在即累加方式输出)*
  - **标准错误输出(stderr):** 代码为2，使用`2>`或`2>>`

如以下是把`ls -al`输出到`testfile`里：
```shell
ls al > ~/testfile
```
正确输出和错误输出分别导到不同文件：
```shell
ls al > ~/file_right 2> ~/file_wrong
```
都输出到同一个文件：
```shell
ls al > ~/file_total 2>&1
```
快速创建一个文档并把键盘输入保存到文档里：(按**ctrl+d**保存)
```shell
cat > testfile
```
- **输入：**`<`简单理解就是“把键盘输入的信息改成从档案的内容里获取”。一些例子：

把`.bashrc`的内容复制到`testfile`里：
```shell
cat > testfile < ~/.bashrc
```
`<<`意思是“结束的输入字符”，即内容里遇到标识的字符就结束。以下指遇到**eof**就结束：
```shell
cat > testfile << "eof"
```
- **双向重导向**：`tee`
  - `tee [-a] file`：同时导出到`file`里，`-a`指以累加的方式添加。

## 管线命令(pipe)

定义：一个命令的stdout信息流导给另一个命令作进一步处理，从而生成用户想要的结果。

- 使用符号`|`，仅能处理上一个命令传过来的正确信息流，即stdout，对于stderr没有直接处理能力（会直接忽略，如需一并处理需要用到资料重导向）。

- 常用**筛选命令** (通常以行为单位进行分析)：
  - `cut`：对信息进行分解。使用例子的模式：
    - `cut -d '分隔符' -f fields`：以`'分隔符'`为分隔，选出第`fields`个项目
    - `cut -c 字符区间`：根据`字符区间`来截取信息，适合排列整齐的信息。
  - `grep`：分析信息并输出符合要求的部分。例子模式：
    - `grep 'root'`：输出带有`'root'`字符串的行信息
    - `grep -v 'root'`：输出**没**带有`'root'`的~
- **排序命令**：
  - `sort`：按英文字母顺序或数字顺序对信息进行排序。
  - `uniq`：对重复信息仅列出一项，或进行整合。
    - `uniq -c`：附上信息的出现次数
  - `wc`：统计文档的行数、字数和字符数。输出的三个数分别为：行数、字数和字符数。
