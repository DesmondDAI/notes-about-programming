## 数据本地化

### NSUserDefaults

- **XML**格式（即`plist`）保存于应用对应的domain，形式为键值对，适合储存用户的偏好设置或用户密码
<br><br>
- **数据类型(对象)：**`NSData`, `NSString`, `NSNumber`, `NSDate`, `NSArray`, `NSDictionary`
<br><br>
- **当没有初始值(即还没有创建条目)时** --> **使用`registerDefaults:`方法加载包含初始值的`plist`文档**
  - 注意：`registerDefaults:`方法并不会写入disk，因此最好在`application:didFinishLaunchingWithOptions`里调用(register defaults是被添加到末尾的search list)
  - 通过`NSUserDefaults`获取值时(如：`objectForKey:`)，`NSUserDefaults`会先在应用域里搜索，如没有才会到注册域(`NSRegistrationDomain`)搜索。
<br><br>
- **关于域：**`NSUserDefaults`数据库由多个层级的域组成，当读取一个值时，它是从上到下按照层级(search list)搜索，不同域有不同功能，有些可以持久，有些就不行
  - **应用域(application domain)：**储存着通过`set...ForKey:`的值
  - **注册域(registration domain)：**在search list的末尾，应用域找不到再找注册域
  - **全局域(global domain)：**储存着系统的设置
  - **语言域(language-specific domains)：**包括地区、日期等 --> ？？
  - **参数域(argument domain)：**有最高优先权 --> ？？
<br><br>
- **参考**：
  - [Handling Default Values With NSUserDefaults](https://oleb.net/blog/2014/02/nsuserdefaults-handling-default-values/)
  - [Preferences and Settings Programming Guide](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/UserDefaults/AboutPreferenceDomains/AboutPreferenceDomains.html#//apple_ref/doc/uid/10000059i-CH2-SW1)
